<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Blog | h0tp-ftw</title>
    <link rel="stylesheet" href="assets/guide-breathtaking.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />
    <style>
      /* Blog List Styles */
      .blog-list {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
        margin-top: 3rem;
      }

      .blog-entry {
        background: rgba(65, 69, 89, 0.6);
        backdrop-filter: blur(30px) saturate(180%);
        -webkit-backdrop-filter: blur(30px) saturate(180%);
        border: 2px solid var(--ctp-surface1);
        border-radius: 20px;
        padding: 1.75rem 2rem;
        text-decoration: none;
        color: var(--ctp-text);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        display: grid;
        grid-template-columns: auto 1fr auto;
        align-items: center;
        gap: 1.5rem;
        position: relative;
        overflow: hidden;
      }

      .blog-entry::before {
        content: "";
        position: absolute;
        left: 0;
        top: 0;
        bottom: 0;
        width: 4px;
        background: linear-gradient(180deg, var(--ctp-mauve), var(--ctp-pink));
        transform: scaleY(0);
        transform-origin: top;
        transition: transform 0.4s ease;
      }

      .blog-entry:hover::before {
        transform: scaleY(1);
      }

      .blog-entry:hover {
        border-color: var(--ctp-mauve);
        transform: translateX(8px);
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.25),
          0 0 30px rgba(202, 158, 230, 0.1);
      }

      .blog-icon {
        font-size: 2.5rem;
        line-height: 1;
        flex-shrink: 0;
      }

      .blog-content {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        min-width: 0;
      }

      .blog-title {
        font-size: 1.35rem;
        font-weight: 700;
        color: var(--ctp-text);
        margin: 0;
        transition: color 0.3s ease;
      }

      .blog-entry:hover .blog-title {
        color: var(--ctp-mauve);
      }

      .blog-description {
        font-size: 1rem;
        color: var(--ctp-subtext1);
        line-height: 1.6;
        margin: 0;
      }

      .blog-meta {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        margin-top: 0.5rem;
      }

      .blog-tag {
        display: inline-block;
        padding: 0.35rem 0.85rem;
        background: linear-gradient(135deg, var(--ctp-mauve), var(--ctp-pink));
        color: var(--ctp-base);
        border-radius: 50px;
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .blog-date {
        font-size: 0.85rem;
        color: var(--ctp-overlay1);
        display: flex;
        align-items: center;
        gap: 0.35rem;
      }

      .blog-date svg {
        width: 14px;
        height: 14px;
        opacity: 0.7;
      }

      .blog-arrow {
        width: 44px;
        height: 44px;
        background: var(--ctp-surface1);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--ctp-text);
        transition: all 0.3s ease;
        flex-shrink: 0;
      }

      .blog-entry:hover .blog-arrow {
        background: var(--ctp-mauve);
        color: var(--ctp-base);
        transform: translateX(4px);
      }

      /* External link indicator */
      .blog-entry[data-external="true"] .blog-arrow::after {
        content: "";
        position: absolute;
        top: -4px;
        right: -4px;
        width: 10px;
        height: 10px;
        background: var(--ctp-blue);
        border-radius: 50%;
        border: 2px solid var(--ctp-base);
      }

      /* Loading state */
      .blog-loading {
        text-align: center;
        padding: 3rem;
        color: var(--ctp-subtext1);
      }

      .blog-loading .loader {
        width: 40px;
        height: 40px;
        border: 3px solid var(--ctp-surface1);
        border-top-color: var(--ctp-mauve);
        border-radius: 50%;
        animation: spin 0.8s linear infinite;
        margin: 0 auto 1rem;
      }

      @keyframes spin {
        to { transform: rotate(360deg); }
      }

      /* Coming soon section */
      .coming-soon-section {
        margin-top: 4rem;
        text-align: center;
      }

      .coming-soon-card {
        background: rgba(65, 69, 89, 0.4);
        backdrop-filter: blur(20px);
        border: 2px dashed var(--ctp-surface2);
        border-radius: 24px;
        padding: 3rem;
        max-width: 600px;
        margin: 0 auto;
      }

      .coming-soon-card h3 {
        font-size: 1.75rem;
        color: var(--ctp-text);
        margin-bottom: 1rem;
      }

      .coming-soon-list {
        text-align: left;
        color: var(--ctp-subtext1);
        font-size: 1.05rem;
        line-height: 2;
        padding-left: 1.5rem;
      }

      .coming-soon-list li::marker {
        color: var(--ctp-mauve);
      }

      @media (max-width: 768px) {
        .blog-entry {
          grid-template-columns: 1fr;
          gap: 1rem;
          padding: 1.5rem;
        }

        .blog-icon {
          font-size: 2rem;
        }

        .blog-title {
          font-size: 1.15rem;
        }

        .blog-arrow {
          display: none;
        }
      }
    </style>
  </head>

  <body data-theme="frappe">
    <!-- Animated Background -->
    <div class="guide-animated-bg">
      <div class="gradient-orb orb-1"></div>
      <div class="gradient-orb orb-2"></div>
      <div class="gradient-orb orb-3"></div>
    </div>

    <!-- Theme Toggle -->
    <button
      class="guide-theme-toggle"
      id="guide-theme-toggle"
      aria-label="Toggle theme"
    >
      <div class="guide-theme-slider">
        <svg
          class="guide-slider-icon moon-icon"
          width="18"
          height="18"
          viewBox="0 0 24 24"
          fill="currentColor"
        >
          <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" />
        </svg>
        <svg
          class="guide-slider-icon sun-icon"
          width="18"
          height="18"
          viewBox="0 0 24 24"
          fill="currentColor"
        >
          <circle cx="12" cy="12" r="5" />
          <path
            d="M12 1v2m0 18v2M23 12h-2M3 12H1m19.071-7.071l-1.414 1.414M5.343 18.657l-1.414 1.414m15.142 0l-1.414-1.414M5.343 5.343L3.929 3.929"
          />
        </svg>
      </div>
    </button>

    <!-- Back Button -->
    <div class="niche-back-nav">
      <a href="../" class="back-btn">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path d="M15 18l-6-6 6-6" />
        </svg>
        Back to Portfolio
      </a>
    </div>

    <!-- Main Content -->
    <div class="niche-container">
      <header class="niche-header">
        <h1>üìù <span class="gradient-text">Blog</span></h1>
        <p class="niche-subtitle">
          Guides, tools, and deep dives into my interests ‚Äî from finance
          calculators to gaming utilities and developer tips.
        </p>
      </header>

      <!-- Blog List (dynamically loaded) -->
      <div class="blog-list" id="blog-list">
        <div class="blog-loading">
          <div class="loader"></div>
          <p>Loading posts...</p>
        </div>
      </div>

      <!-- Coming Soon -->
      <div class="coming-soon-section">
        <div class="coming-soon-card">
          <h3>‚ú® More Coming Soon</h3>
          <ul class="coming-soon-list">
            <li>Linux system administration tips</li>
            <li>Bluefin/Bazzite specific guides</li>
            <li>Distrobox tricks and workflows</li>
            <li>Bioinformatics tool configurations</li>
          </ul>
        </div>
      </div>
    </div>

    <script>
      // Theme toggle functionality
      const themeToggle = document.getElementById("guide-theme-toggle");
      const html = document.documentElement;

      const savedTheme = localStorage.getItem("theme") || "frappe";
      html.setAttribute("data-theme", savedTheme);

      function updateTogglePosition() {
        const currentTheme = html.getAttribute("data-theme");
        const slider = document.querySelector(".guide-theme-slider");
        if (slider) {
          slider.classList.toggle("light-mode", currentTheme === "latte");
        }
      }

      updateTogglePosition();

      themeToggle.addEventListener("click", () => {
        const currentTheme = html.getAttribute("data-theme");
        const newTheme = currentTheme === "frappe" ? "latte" : "frappe";

        html.setAttribute("data-theme", newTheme);
        localStorage.setItem("theme", newTheme);
        updateTogglePosition();
      });

      // Load blog posts from projects.json
      async function loadBlogPosts() {
        const blogList = document.getElementById("blog-list");
        
        try {
          const response = await fetch("./projects.json");
          if (!response.ok) throw new Error("Failed to load posts");
          
          const { projects } = await response.json();
          
          // Sort by date (most recent first)
          projects.sort((a, b) => new Date(b.date) - new Date(a.date));
          
          const formatDate = (dateStr) => {
            const date = new Date(dateStr);
            return date.toLocaleDateString("en-US", {
              year: "numeric",
              month: "short",
              day: "numeric"
            });
          };
          
          const postsHTML = projects.map(post => {
            const isExternal = post.file.startsWith("http");
            const href = isExternal ? post.file : post.file;
            const target = isExternal ? '_blank' : '_self';
            
            return `
              <a href="${href}" class="blog-entry" target="${target}" rel="${isExternal ? 'noopener' : ''}" data-external="${isExternal}">
                <span class="blog-icon">${post.icon}</span>
                <div class="blog-content">
                  <h2 class="blog-title">${post.title}</h2>
                  <p class="blog-description">${post.description}</p>
                  <div class="blog-meta">
                    <span class="blog-tag">${post.tag}</span>
                    <span class="blog-date">
                      <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19 4h-1V2h-2v2H8V2H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zm0-12H5V6h14v2z"/>
                      </svg>
                      ${formatDate(post.date)}
                    </span>
                  </div>
                </div>
                <div class="blog-arrow">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M5 12h14M12 5l7 7-7 7" />
                  </svg>
                </div>
              </a>
            `;
          }).join("");
          
          blogList.innerHTML = postsHTML;
          
        } catch (error) {
          console.error("Failed to load blog posts:", error);
          blogList.innerHTML = '<p style="text-align: center; color: var(--ctp-red);">Failed to load posts. Please try again later.</p>';
        }
      }
      
      // Load posts on page load
      document.addEventListener("DOMContentLoaded", loadBlogPosts);
    </script>
  </body>
</html>
